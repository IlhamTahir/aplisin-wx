{% extends 'base.html.twig' %}

{% block body %}

{{ script(['app/js/example/ajax-form-submit.js']) }}

<div class="container">
  <div class="row">
    <div class="col-md-6 col-md-offset-3">
      <h2>表单Ajax提交演示</h2>

      <form id="example-form" action="{{ path('example_ajax_form_submit') }}" method="post">
        <div class="form-group">
          <label>用户名</label>
          <input type="text" class="form-control" name="username" value="">
        </div>
        <div class="alert alert-info" id="result"></div>

        {{ form_csrf_token() }}
        <input type="hidden" name="_csrf_token" value="{{ csrf_token('site') }}">
        <button type="submit" class="btn btn-primary">提交</button>
      </form>

      <h2>点击按钮Ajax提交演示</h2>

      <a href="javascript:;" data-url="{{ path('example_ajax_form_submit') }}" id="hello-btn">Hello!</a>

      <p>
        请打开chrome的开发者面板，查看Request信息，你会看到：X-CSRF-Token。因为系统对所有ajax请求头加入了X-CSRF-Token，相关代码在：app/resources/global.js中。
      </p>

    </div>
  </div>
</div>

{% endblock %}